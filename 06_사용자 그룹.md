# 06_사용자 그룹

Linux에서는 사용자와 사용자가 속한 그룹을 관리한다.

이 때, 사용자가 곧 그룹이 될 수도 있다.

## 1. 개요

### 1) 사용자

사용자는 루트 계정, 시스템 계정, 사용자 계정으로 크게 나눌 수 있다.

- 루트 계정: 모든 권한을 가진 특별한 사용자 계정
  - UID가 0이며, 다른 계정의 UID를 0으로 바꾸면 해당 계정 역시 루트 계정처럼 모든 권한을 가지게 된다.
- 시스템 계정: 리눅스 설치 시 기본적으로 생성되는 사용자 계정
  - bin, daemon, adm, lp, sync, shutdown, halt, mail 등이 있으며 일반적인 방법으론 로그인이 불가능하다.
- 사용자 계정: 실제 리눅스 환경을 사용하는 사용자

보통 일반적으로는 크게 루트(root, 관리자)와 일반 사용자로 구분한다.

<br>

### 2) 그룹

그룹이란 사용자들을 묶어서 관리할 수 있게 해주는 메커니즘이다.

그룹을 통해 각 그룹에 보안 설정, 접근 설정, 권한 등을 일괄 적용하여 그룹에 속한 사용자에 대한 권한을 관리할 수 있다.

모든 사용자는 사용자 ID인 `UID`와 그룹에 대한 식별자인 `GID`를 가진다.

단, 사용자 생성 시 기본적으로 사용자 이름과 동일한 이름의 그룹을 생성하여 포함시킨다.

#### (1) Primary Group

오직 1개만 존재해야 하며, 사용자가 로그인 할 때 또는 파일/디렉토리를 생성할 때 부여되는 기본 그룹

#### (2) Secondary Group(s)

없거나 여러 개 존재할 수 있으며, 사용자가 파일/디렉토리를 읽거나 쓰거나 실행할 때 지정된 그룹들의 권한을 받을 수 있음

<br>

## 2. 그룹 관련 명령어

### 1) 그룹 출력

- 특정 사용자나 현재 로그인한 사용자가 속한 그룹을 표시

```bash
sudo groups
```

- 전체 그룹 출력

```bash
sudo getent group
```

<br>

### 2) 그룹 생성

```bash
sudo groupadd [options] [groupname]
```

- 옵션
  - `-f`, `--force`: 강제 생성(이미 생성되어 있더라도 성공으로 간주)
  - `-r`, `--system`: 시스템 그룹을 생성
  - `-g`, `--gid`: 그룹의 ID를 지정하여 생성
  - `-o`, `--non-unique`: 중복된 GID를 허락함

<br>

### 3) 그룹 정보 변경

```bash
sudo groupmod [options]
```

-  `sudo groupmod -n [new_groupname] [groupname]`: [new_groupname]으로 그룹명을 변경함
- `sudo groupmod -g [new_GID] [groupname]`: groupname의 GID를 [new_GID]로 변경함

<br>

### 4) 그룹 삭제

```bash
sudo groupdel [groupname]
```

<br>

## 3. 사용자 관련 명령어

### 1) 루트 계정 관련

#### (1) 루트 암호 설정

```bash
sudo passwd root
```

#### (2) 루트 로그인

```bash
sudo su -
```

<br>

### 2) 사용자 확인

```bash
# 현재 로그인한 사용자의 사용자명 출력
id - un
whoami
logname

# 현재 로그인한 사용자의 uid, 그룹명 출력
id
```

<br>

### 3) 사용자 추가

```bash
sudo useradd [options] [username]
```

추가된 사용자는 `/etc/passwd` 파일에서 확인할 수 있다.

- 옵션
  - `-d`

